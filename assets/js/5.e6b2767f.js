(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{209:function(t,n,e){t.exports=e.p+"assets/img/middleware-call-sequence.f9adb834.png"},668:function(t,n,e){"use strict";e.r(n);var s=e(0),a=Object(s.a)({},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("As you see in the previous section, a middleware can be use on different context:")]),t._v(" "),s("ul",[s("li",[s("router-link",{attrs:{to:"/docs/server-loader.html"}},[t._v("ServerLoader")]),t._v(",")],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/docs/controllers.html"}},[t._v("Controller")]),t._v(",")],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/docs/controllers.html"}},[t._v("Endpoint")]),t._v(".")],1)]),t._v(" "),s("p",[t._v("Middleware associated to a controller or endpoint as a same constraint that an endpoint.\nIt'll be played only when the url request match with the path associated to the controller and his endpoint method.")]),t._v(" "),s("p",[t._v("When a request is sent to the server all middlewares added in the "),s("router-link",{attrs:{to:"/docs/server-loader.html"}},[t._v("ServerLoader")]),t._v(", "),s("router-link",{attrs:{to:"/docs/controllers.html"}},[t._v("Controller")]),t._v(" or Endpoint with decorators\nwill be called while a response isn't sent by one of the middleware in the stack.")],1),t._v(" "),s("img",{staticStyle:{"max-width":"400px"},attrs:{src:e(209)}}),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("For example:")]),t._v(" "),t._m(4),s("p",[t._v("According to the call sequence scheme, the stack will be there:")]),t._v(" "),t._m(5)])},[function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"middleware-call-sequences"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#middleware-call-sequences","aria-hidden":"true"}},[this._v("#")]),this._v(" Middleware call sequences")])},function(){var t=this.$createElement,n=this._self._c||t;return n("blockquote",[n("p",[this._v("Note: The middlewares represented in the Endpoint (0-n) box will be replayed as many times as it has endpoint that match\nthe url of the request.")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("blockquote",[n("p",[this._v("* Render is called only when a the @Render o @ResponseView decorator is used on the endpoint.")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("blockquote",[n("p",[this._v("** SendResponse middleware send a response only when a data is return by the endpoint method.")])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"language-typescript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-typescript"}},[e("code",[t._v("@"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Controller")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseAfter")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MdlwCtrlAfter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseBefore")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MdlwCtrlBefore"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Use")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MdlwCtrl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyCtrl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    @"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    @"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseAfter")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MdlwAfter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    @"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Use")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Mdlw"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    @"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("UseBefore")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MdlwBefore"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("endpointA")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("@"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Next")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EndpointA"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    @"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("endpointB")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EndpointB"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ul",[e("li",[e("strong",[t._v("Middlewares")]),t._v(" added in ServerLoader (logger, express middleware, etc...),")]),t._v(" "),e("li",[e("strong",[t._v("MdlwCtrlBefore")]),t._v(",")]),t._v(" "),e("li",[e("strong",[t._v("MdlwCtrl")]),t._v(",")]),t._v(" "),e("li",[e("strong",[t._v("MdlwBefore")]),t._v(",")]),t._v(" "),e("li",[e("strong",[t._v("MyCtrl.endpointA")]),t._v(",")]),t._v(" "),e("li",[e("strong",[t._v("MdlwAfter")]),t._v(",")]),t._v(" "),e("li",[e("strong",[t._v("SendResponse")]),t._v(", (but nothing data is returned by the endpointA)")]),t._v(" "),e("li",[e("strong",[t._v("MdlwCtrl")]),t._v(",")]),t._v(" "),e("li",[e("strong",[t._v("MyCtrl.endpointB")]),t._v(",")]),t._v(" "),e("li",[e("strong",[t._v("MdlwAfter")]),t._v(",")]),t._v(" "),e("li",[e("strong",[t._v("SendResponse")]),t._v(", send a response because endpointB return a data,")]),t._v(" "),e("li",[e("strong",[t._v("MdlwCtrlAfter")]),t._v(", but this middleware will not be called because a response is sent.")]),t._v(" "),e("li",[e("strong",[t._v("Middleware")]),t._v(" added in ServerLoader (not called too).")])])}],!1,null,null,null);a.options.__file="call-sequence.md";n.default=a.exports}}]);